<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bracia Słowianie</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500&family=Roboto+Condensed:wght@400;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="snake.css">

</head>

<body>
  <header>
    <div class="swarga">
      <img class="logo" src="images/kołowrót.png" alt="kołowrót">
    </div>
    <!-- <img class='slider' src="images/green.jpg" alt=""> -->
    <h1 class='slider'>Bracia Słowianie</h1>
    <button class="hey">Poznaj nas!</button>
    <div>
      <span class="text1"></span><span class="cursor1">|</span>
    </div>
  </header>
  <section>
    <div class="nag">
      <h2>Jeżeli już tu trafiłeś...to dobry znak!</h2>
    </div>
    <p>Bracia Słowianie to elitarna grupa najszlachetniejszych mężów, których dotąd nosiła nasza Matka Ziemia.
      Powstawanie jej ma miejsce cyklicznie, w każdym z eonów czasu. Jednak teraz nastał czas szczególnej jej
      wizualizacji i inicjacji. Każdy z mędrców grupy to jest <strong>Kistron</strong>,
      <strong>Karczmanasutra</strong>,
      <strong>Pyndzosław</strong> oraz <strong>Ananuaki</strong> są w stanie szczególnej transformacji swojej mocy aby
      pomagać w dążeniu do jedności ducha. Dlatego jeśliś gotów, rozkoduj wiadomość a znajdziesz nas w prastarych
      lasach <strong>Lechii</strong>.</p>
    <div class="zagadka">
      <!-- <h2>Zakodowana wiadomość</h2> -->
      <button class="start">ZAKODOWANA WIADOMOŚĆ</button>
      <div class="area">
        <span class="text"></span><span class="cursor">|</span>
      </div>
  </section>
  <section>

    <div id="snake"></div>
    <div class="buttons">

      <button class='up'>&#9650;</button>
      <button class='right'>&#9658;</button>
      <button class='down'>&#9660;</button>
      <button class='left'>&#9668;</button>

    </div>

  </section>
  <footer>&copy; Anakonda Corporation</footer>
  <script src="main.js"></script>
  <script src="main2.js"></script>

  <script src="Display.js"></script>
  <script src="Pixel.js"></script>
  <script src="InputManager.js"></script>
  <script src="Game.js"></script>
  <script>
    let snakeElement = document.getElementById("snake");

    let width = 30;
    let height = 30;
    const game = new Game(height, width, snakeElement);
    game.start();
  </script>




  <script>
    return;
    let snakeElement = document.getElementById("snake");

    let width = 30;
    let height = 30;

    // let snakeMoveInterval = setInterval(function () {
    //   let display = new Display(height, width);

    //   for (let i = 0; i < snake.length; i++) {
    //     display.changeColor(snake[i].x, snake[i].y, "green");
    //     snake[i].x += (1 * (right ? 1 : -1));

    //     // console.log(i + ": " + snake[i].x);
    //   }

    //   display.render(snakeElement);

    //   if (snake.some(segment => segment.x == 0) ||
    //     snake.some(segment => segment.x == width - 1)) {
    //     right = !right;
    //   }
    // }, 100);

    let buttonUp = document.getElementsByClassName('up')[0];
    let buttonDown = document.getElementsByClassName('down')[0];
    let buttonRight = document.getElementsByClassName('right')[0];
    let buttonLeft = document.getElementsByClassName('left')[0];


    let inputManager = new InputManager(buttonUp, buttonRight, buttonDown, buttonLeft);

    // setInterval(function () {
    //   let lastDirection = inputManager.getLastClickedButton();
    //   console.log(lastDirection);
    // }, 3000);

    /******************************/
    let tail = {
      data: {
        x: 8,
        y: 10
      },
      next: null
    };
    let middle = {
      data: {
        x: 9,
        y: 10
      },
      next: tail
    };
    let head = {
      data: {
        x: 10,
        y: 10
      },
      next: middle
    }

    setInterval(() => {
      let display = new Display(height, width);

      var diffVector;
      var direction = inputManager.getLastClickedButton();

      switch (direction) {
        case 'down':
          diffVector = {
            x: 0,
            y: 1
          }
          break;
        case 'up':
          diffVector = {
            x: 0,
            y: -1
          }
          break;
        case 'left':
          diffVector = {
            x: -1,
            y: 0
          }
          break;
        case 'right':
          diffVector = {
            x: 1,
            y: 0
          }
          break;
      }

      if (!!direction) {
        let current;
        current = head;

        let previousData = {};
        previousData = Object.assign(previousData, current.data);
        current.data.y += diffVector.y;
        current.data.x += diffVector.x;

        current = current.next;

        while (current != null) {
          let currentData = {};
          currentData = Object.assign(currentData, current.data);
          current.data = previousData;
          previousData = currentData;

          current = current.next;
        }

      }

      current = head;
      while (current != null) {
        display.changeColor(current.data.x, current.data.y, "blue");

        current = current.next;
      }
      display.render(snakeElement);
    }, 500);
  </script>
</body>

</html>